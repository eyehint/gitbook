# API

## 공통 | Headers <a href="#common-header" id="common-header"></a>

| Name           | Type   | Required  | Description                                                                                                                                                                                                                                                                                                              | Default |
| -------------- | ------ | --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------- |
| Authorization  | String | Mandatory | <ul><li>LG 회원 플랫폼(EMP)에서 사용자 인증을 위해 OAuth 표준에 따라 발급하는 토큰 값입니다.</li><li>이 토큰을 이용하여 LG ThinQ 플랫폼은 어느 사용자의 디바이스 정보를 제공해야 하는지 식별하고, 서비스가 해당 사용자의 디바이스 정보를 이용하도록 승인 받았는지 확인합니다. Bearer {token}</li></ul>                                                                                                                      | None    |
| x-country-code | String | Fixed     | <ul><li>서비스를 제공할 국가를 지정할 수 있습니다.</li><li>국가코드 ISO 3166-1 alpha-2를 사용합니다.</li><li>현재는 한국만 지원합니다.</li></ul>                                                                                                                                                                                                                | KR      |
| x-message-id   | String | Option    | <ul><li>ThinQ 플랫폼으로 요청되는 정보를 추적하기 위한 값 입니다. 특정 API의 흐름을 추적하고 에러 발생 시 원인을 찾을 수 있습니다.</li><li>생성 규칙 - url-safe-base64-no-padding (UUID Version 4)방법으로 생성합니다. - 길이는 22자입니다.</li><li>코드 예시 (Python)</li></ul><pre><code>import uuid
import base64
messageId = base64.urlsafe_b64encode(uuid.uuid4().bytes)[:-2]</code></pre> | None    |

### Headers 예시

```
{
    "Authorization": "Bearer 5a9a713f51a95c53d781addd1af0dfa4f6e1e7420a8bff3c5198308dac571aa9845832b8d29bbe1f04deec2d35229c6d",
    "x-country-code": "KR",
    "x-message-id": "0123456789012345678912"
}
```

## 공통 | Response <a href="#common-res" id="common-res"></a>

### HTTP 응답 코드

#### HTTP 표준 응답 코드 규약

ThinQ Connect API의 응답 코드는 다음과 같은 HTTP 표준 응답 코드 규약에 따라 정의됩니다.

| HTTP Response Code | Description             |
| ------------------ | ----------------------- |
| 2xx                | 성공                      |
| 4xx                | 에러 (클라이언트에서 요청이 잘못된 경우) |
| 5xx                | 에러 (서버에서 오류가 발생한 경우)    |

#### ThinQ Connect API에서 사용하는 HTTP 응답코드

ThinQ Connect API에서 사용하는 응답 코드는 다음과 같으며, 매 요청마다 다음 중 적절한 응답 코드를 반환합니다.

| HTTP Response Code | Text Message          | Description       |
| ------------------ | --------------------- | ----------------- |
| 200                | OK                    | 정상 응답             |
| 400                | Bad request           | 잘못된 요청임           |
| 401                | Unauthorized          | 권한이 없음            |
| 404                | Not found             | 요청받은 리소스를 찾을 수 없음 |
| 500                | Internal server error | 서버 에러임            |
| 501                | Not implemented       | 아직 구현되지 않음        |
| 503                | Service unavailable   | 사용할 수 없는 서비스임     |

### 응답 메시지

#### 공통 메시지

| Name      | Type   | Description                                                                |
| --------- | ------ | -------------------------------------------------------------------------- |
| Messageid | String | 요청 시 헤더에 포함된 X-Message-ID 값입니다. 이 값을 응답 메시지에 포함시켜서 문제가 있을 때 확인할 수 있도록 합니다. |
| Timestamp | String | 요청이 들어왔을 때의 시간을 의미하며 ISO 8601 Format을 따릅니다.                                |

#### 예시

```
{
    "messageId": "fNvdZ1brTn-wWKUlWGoSVw",
    "timestamp": "2019-06-25T04:52:18.370732"
}
      
```

#### 예시 메시지

API 실행 중 에러가 발생했을 때, 아래 표와 같은 구조로 에러 값을 반환합니다.

| Name      | Type   | Description                 |
| --------- | ------ | --------------------------- |
| Error     | Object | 발생한 에러에 대한 상세 설명을 제공하는 오브젝트 |
| └ Message | String | 해당 에러에 대한 간략한 설명            |

## 공통 | Error <a href="#common-err" id="common-err"></a>

HTTP의 응답 코드로 확인할 수 없는 에러는 에러 코드를 통해 에러 발생 원인을 분석할 수 있습니다. 다음은 ThinQ Connect API에서 공통적으로 사용되는 에러 코드입니다.

### 규칙

ThinQ Connect API의 에러 코드는 클라이언트 에러와 서버 에러로 구분됩니다.

* 클라이언트에게 에러 원인을 알려주기 위해 사용됩니다
* 서버 문제로 발생하는 에러를 나타내기 위해 사용됩니다.

| Error Code | Description |
| ---------- | ----------- |
| 1000       | 클라이언트 에러    |
| 11xx       | 파라미터        |
| 12xx       | 리소스         |
| 13xx       | 권한          |
| 2000       | 서버에러        |

### ThinQ Connect API에서 사용하는 에러 코드

#### 에러 코드 전체 리스트 보기 <a href="#errorcodelist" id="errorcodelist"></a>

### 에러 메시지 구조

API 실행 중 에러가 발생했을 때 아래와 같은 구조로 에러 값을 반환합니다.

| Name      | Type   | Description                      |
| --------- | ------ | -------------------------------- |
| Error     | Object | 발생한 에러에 대한 상세 설명을 제공하는 오브젝트      |
| └ Message | String | 해당 에러에 대한 간략한 설명                 |
| └ Code    | Enum   | 에러 원인을 상세하게 확인하게 위한 Error Code 값 |

## 가전 목록 조회 <a href="#device-li" id="device-li"></a>

### GET {Base\_URL}/devices

| Description                                 | 사용자가 LG ThinQ 플랫폼에 등록한 가전 목록을 얻어오기 위한 API입니다. 다른 메서드들을 사용하기 전에 반드시 한 번은 호출되어야 하며, 가전 목록을 한 번 얻어온 후에는 매번 호출할 필요는 없습니다. 이 메서드가 반환해 준 가전 목록에는 디바이스를 식별할 수 있는 device-id가 포함되어 있으며, 이 값으로 대상 디바이스를 지정하여 다른 메서드들을 호출할 수 있습니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                     |
| ------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------- |
| Parameters                                  | <p>Header Parameters : <a href="https://developer.damda.lge.com/docs/thinq/reference#common-header">공통 Headers</a>를 사용합니다.<br>Body Parameters : None</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                     |
| Result                                      | <h4>성공</h4><p>서비스가 허용한 가전 타입에 해당하는 사용자의 디바이스 목록이 다음과 같은 형식으로 반환됩니다. 사용자가 LG ThinQ 플랫폼에 등록한 가전이 없을 경우 비어 있는 값이 반환됩니다.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>deviceld</td><td>String</td><td>디바이스를 식별할 수 있는 ID</td></tr><tr><td>deviceInfo</td><td>Object</td><td>디바이스에 대한 다음 정보를 담은 오브젝트</td></tr><tr><td>└ deviceType</td><td>Enum</td><td>디바이스의 가전 타입</td></tr><tr><td>└ modelName</td><td>String</td><td>디바이스의 모델 이름</td></tr><tr><td>└ alias</td><td>String</td><td>디바이스 닉네임</td></tr><tr><td>└ reportable</td><td>Boolean</td><td>디바이스의 상태 변경 시 발생하는 event에 대해, 서비스가 event를 구독 중인지 여부</td></tr></tbody></table><h4>실패</h4><p>공통 Responses에 정의된 응답 규약에 따라 에러 코드와 에러 메시지가 반환됩니다.</p><h4>참고 | Device Type</h4><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>DEVICE_AIR_CONDITIONER</td><td>에어컨</td></tr><tr><td>DEVICE_AIR_PURIFIER</td><td>공기 청정기</td></tr><tr><td>DEVICE_CEILING_FAN</td><td>실링팬</td></tr><tr><td>DEVICE_DEHUMIDIFIER</td><td>제습기</td></tr><tr><td>DEVICE_DISH_WASHER</td><td>식기 세척기</td></tr><tr><td>DEVICE_DRYER</td><td>건조기</td></tr><tr><td>DEVICE_OVEN</td><td>오븐</td></tr><tr><td>DEVICE_REFRIGERATOR</td><td>냉장고</td></tr><tr><td>DEVICE_ROBOT_CLEANER</td><td>로봇 청소기</td></tr><tr><td>DEVICE_WASHER</td><td>세탁기</td></tr><tr><td>DEVICE_STYLER</td><td>스타일러</td></tr><tr><td>DEVICE_WATER_PURIFIER</td><td>정수기</td></tr><tr><td>DEVICE_LUMI_DOOR_WINDOW_SENSOR</td><td>Aqara 도어 창문센서</td></tr><tr><td>DEVICE_LUMI_MOTION_SENSOR</td><td>Aqara 모션 센서</td></tr><tr><td>DEVICE_LUMI_TEMPERATURE_HUMIDITY_SENSOR</td><td>Aqara 온습도 센서</td></tr><tr><td>DEVICE_LUMI_PLUG</td><td>Aqara 스마트 플러그</td></tr></tbody></table> |                                                     |
| Name                                        | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Description                                         |
| deviceld                                    | String                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 디바이스를 식별할 수 있는 ID                                   |
| deviceInfo                                  | Object                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 디바이스에 대한 다음 정보를 담은 오브젝트                             |
| └ deviceType                                | Enum                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 디바이스의 가전 타입                                         |
| └ modelName                                 | String                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 디바이스의 모델 이름                                         |
| └ alias                                     | String                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 디바이스 닉네임                                            |
| └ reportable                                | Boolean                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 디바이스의 상태 변경 시 발생하는 event에 대해, 서비스가 event를 구독 중인지 여부 |
| Name                                        | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                     |
| DEVICE\_AIR\_CONDITIONER                    | 에어컨                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                     |
| DEVICE\_AIR\_PURIFIER                       | 공기 청정기                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                     |
| DEVICE\_CEILING\_FAN                        | 실링팬                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                     |
| DEVICE\_DEHUMIDIFIER                        | 제습기                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                     |
| DEVICE\_DISH\_WASHER                        | 식기 세척기                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                     |
| DEVICE\_DRYER                               | 건조기                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                     |
| DEVICE\_OVEN                                | 오븐                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                     |
| DEVICE\_REFRIGERATOR                        | 냉장고                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                     |
| DEVICE\_ROBOT\_CLEANER                      | 로봇 청소기                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                     |
| DEVICE\_WASHER                              | 세탁기                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                     |
| DEVICE\_STYLER                              | 스타일러                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                     |
| DEVICE\_WATER\_PURIFIER                     | 정수기                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                     |
| DEVICE\_LUMI\_DOOR\_WINDOW\_SENSOR          | Aqara 도어 창문센서                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                     |
| DEVICE\_LUMI\_MOTION\_SENSOR                | Aqara 모션 센서                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                     |
| DEVICE\_LUMI\_TEMPERATURE\_HUMIDITY\_SENSOR | Aqara 온습도 센서                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                     |
| DEVICE\_LUMI\_PLUG                          | Aqara 스마트 플러그                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                     |

### Request 예시

### GET ENDPOINT\_URL/devices

```
## Header {
    "Authorization" : "Bearer 5a9a713f51a95c53d781addd1af0dfa4f6e1e7420a8bff3c5198308dac571aa9845832b8d29bbe1f04deec2d35229c6d",
    "x-country-code" : "KR", "x-message-id" : "0123456789012345678912",
}
      
```

### Response 예시

```
{
    "messageId": "0123456789012345678912",
    "timestamp": "2018-02-08T06:23:20.866279",
    "response": [
          {
              "deviceId":
              "0A36FC52-6281-4954-86D5-616A58CEA2C6",
              "deviceInfo": {
                  "deviceType":"DEVICE_REFRIGERATOR",
                  "modelName": "S-TF",
                  "alias": "nickname",
                  "reportable": true
              }
          }
      ]
  }
```

## 가전 상태 조회 <a href="#device-cond" id="device-cond"></a>

### GET {Base\_URL}/devices

| Description                                          | 디바이스의 현재 상태를 조회하기 위한 API입니다.                                                                              |
| ---------------------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| Precondition                                         | 이 메서드를 사용하기 전, device-id 값을 얻기 위해 반드시 한 번은 디바이스 목록 조회 (GET /devices) 메서드를 호출해야 합니다.                       |
| Parameters                                           | Header Parameters : 공통 Headers를 사용합니다. Body Parameters : None                                             |
| Result                                               | 성공 디바이스의 현재 상태가 반환됩니다. 반환값은 가전별 Profile을 기준으로 작성된 JSON 형태로 반환되며, 가전 타입마다 Profile의 구조가 다릅니다. 가전 Profile 보기 |
| 실패 공통 Responses에 정의된 응답 규약에 따라 에러 코드와 에러 메시지가 반환됩니다. |                                                                                                           |

### Request 예시

```
## Header
{
    "Authorization" : "Bearer 13d6800857e953e58c0a9f0cf4c1c298ecfa3012d1f9486a1925397a1f2a5d13ac6c898c9eaabda9c57ee8e8eca1006a",
    "x-country-code" : "KR",
    "x-message-id" : "0123456789012345678912",
}
```

### Response 예시

```
{
    "messageId": " c2d362a0-dd0f-11e6-a7c7-abfb76e3e664",
    "timestamp": " 1284101485",
    "response": ${Device Status}
}
```

## 가전 Profile 조회 <a href="#device-pro" id="device-pro"></a>

### GET {Base\_URL}/devices/profile/{device-id}

| Description  | 디바이스의 Profile을 조회하기 위한 API입니다. 디바이스 Profile이란, LG 가전의 속성을 가전 타입별로 표준화하여 기술한 정보로, LG ThinQ 플랫폼이 사용하는 디바이스 데이터입니다. 예를 들어, 냉장고에 대한 디바이스 Profile은 온도, 냉동모드, 절전모드, 도어 열림 등 냉장고의 상태를 설명하고 제어하기 위한 속성들을 정의합니다. 이 Profile을 바탕으로 디바이스의 상태를 해석하고 제어 명령을 생성할 수 있습니다. |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Precondition | 이 메서드를 사용하기 전, device-id 값을 얻기 위해 반드시 한 번은 디바이스 목록 조회(GET /devices) 메서드를 호출해야 합니다.                                                                                                                                                                        |
| Parameters   | <p>Header Parameters : 공통 Headers를 사용합니다.<br>Body Parameters : None</p>                                                                                                                                                                                   |
| Result       | <h4>성공</h4><p>디바이스의 가전 타입에 따라 디바이스 Profile이 JSON 형태로 반환됩니다. <a href="https://developer.damda.lge.com/docs/thinq/profile">가전 Profile 보기</a></p><h4>실패</h4><p>공통 Responses에 정의된 응답 규약에 따라 에러 코드와 에러 메시지가 반환됩니다.</p>                                         |

### Request 예시

```
## Header
{
    "authorization": "Bearer a6586272fc390566850bc5a837d32872f0c794498f651b5174244451700e2ea00ddb8dcc96902ea469aa765e589a221d",
    "x-country-code": "KR",
    "x-message-id": "0123456789012345678912",
}
```

### Response 예시

```
{
    "messageId": " c2d362a0-dd0f-11e6-a7c7-abfb76e3e664",
    "timestamp": "1284101485",
    "response": <Device Profile>
}
```

## 가전 제어 <a href="#device-cont" id="device-cont"></a>

### POST {Base\_URL}/devices/{device-id}

| Description  | LG ThinQ 플랫폼에 등록되어 있는 가전을 제어하기 위한 API입니다.                                                                                                                                                                               |
| ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Precondition | 이 메서드를 사용하기 전, device-id 값을 얻기 위해 반드시 한 번은 디바이스 목록 조회(GET /devices) 메서드를 호출해야 합니다.                                                                                                                                      |
| Parameters   | <p>Header Parameters : 공통 Headers를 사용합니다.<br>Body Parameters : 디바이스별로 다른 파라미터를 가집니다.<a href="https://developer.damda.lge.com/docs/thinq/profile">가전 Profile 보기</a></p><pre><code>{
    // Device Command
}</code></pre> |
| Result       | 성공 Status 200 코드와 빈 값이 반환됩니다. 실패 공통 Responses에 정의된 응답 규약에 따라 에러 코드와 에러 메시지가 반환됩니다.                                                                                                                                      |

## EMP Access Token 발급 <a href="#access-tok" id="access-tok"></a>

※ EMP(Enterprise Membership Platform) : LG전자 회원 플랫폼을 의미합니다

### POST {Base\_URL}/token

| Description    | ThinQ API에 사용되는 회원 계정의 Access Token을 발급하기 위한 API입니다. ID/Password 및 Refresh Token 방식을 지원하며, 현재 LG Account만 지원됩니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                                               |
| -------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------- |
| Parameters     | <p>Header Parameters : Authorization을 제외한 공통 Headers를 사용합니다.</p><h4>Body Parameters</h4><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>grant_type</td><td>string</td><td>[ password, refresh_token ]</td></tr><tr><td>id</td><td>string</td><td>LG Account ID (password grant type시 필수)</td></tr><tr><td>pasword</td><td>string</td><td>LG Account Password (password grant type시 필수)</td></tr><tr><td>refresh_token</td><td>string</td><td>Refresh Token일 시 필수</td></tr></tbody></table>                                                   |                                               |
| Name           | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Description                                   |
| grant\_type    | string                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | \[ password, refresh\_token ]                 |
| id             | string                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | LG Account ID (password grant type시 필수)       |
| pasword        | string                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | LG Account Password (password grant type시 필수) |
| refresh\_token | string                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Refresh Token일 시 필수                           |
| Result         | <h4>성공</h4><ul><li>Password 방식 : Access Token, Refresh Token, Expired time(Sec.) 반환</li><li>Refresh Token 방식 : Access Token, Expired time(Sec.) 반환</li></ul><h4>실패</h4><p>아래 정의된 응답 규약에 따라 에러 코드와 에러 메시지가 반환됩니다.</p><table><thead><tr><th>Error Code</th><th>Error Message</th><th>Description</th></tr></thead><tbody><tr><td>412</td><td>required grant_type</td><td>파라미터가 누락됨<br>- grant_type</td></tr><tr><td>412</td><td>required refresh_token</td><td>요청 파라미터가 누락됨<br>- refresh_token</td></tr><tr><td>500</td><td>Login Error</td><td>요청 정보에 오류가 있는 경우</td></tr></tbody></table> |                                               |
| Error Code     | Error Message                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Description                                   |
| 412            | required grant\_type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | <p>파라미터가 누락됨<br>- grant_type</p>              |
| 412            | required refresh\_token                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | <p>요청 파라미터가 누락됨<br>- refresh_token</p>        |
| 500            | Login Error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 요청 정보에 오류가 있는 경우                              |

### Request

#### password 방식

```
         ## Header
{
    "x-country-code": "KR",
    "x-message-id": "0123456789012345678912",
}

## Body
{
  "grant_type": "password",
  "id": "abc@mailaddr.com"
  "password": "password"
}
       
```

#### refresh token 방식

```
         ## Header
{
    "x-country-code": "KR",
    "x-message-id": "0123456789012345678912",
}

## Body
{
  "grant_type": "refresh_token",
  "refresh_token": "abcdeqjioeqoiejoqadmaomdkdlkj"
}
       
```

### Response

#### password 방식

```
         {
    "access_token":
    "7a407a61366e2d930d4414328875b3996911fd5598e34aa50c98762822a3242e2ecc06cf9252514081ddafec48916495",
    "expires_in": "3600",
    "refresh_token": "9397e5d32045b37353d94b8d42057f5e9ad8a210feacc2fb4d28a694d58fe30c42d955c15fa436825364dde96b59a1a0"
}
       
```

#### refresh\_token 방식

```
         {
    "access_token":
    "7a407a61366e2d930d4414328875b3996911fd5598e34aa50c98762822a3242e2ecc06cf9252514081ddafec48916495",
    "expires_in": "3600"
}
       
```

## Event/Push Callback (Websocket) <a href="#callback" id="callback"></a>

### WSS wss://s7vajyybvf.execute-api.ap-northeast-2.amazonaws.com/websocket

| Description   | 이 메서드는 Websoket을 통하여 ThinQ 가전의 Push 및 Evnet 콜백 메시지를 수신하기 위한 API입니다.                                                                                                                                                                                                                                                                                                     |           |                                                                                 |         |
| ------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | ------------------------------------------------------------------------------- | ------- |
| Parameters    | <h4>Header Parameters</h4><p>: 없음</p><h4>Query Parameters</h4><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td>access_token</td><td>String</td><td>Mandatory</td><td>LG EMP(Enterprise Membership Platform)에서 사용자 인증을 위해 OAuth 표준에 따라 발급해주는 토큰 값입니다.</td><td>None</td></tr></tbody></table> |           |                                                                                 |         |
| Name          | Type                                                                                                                                                                                                                                                                                                                                                                    | Required  | Description                                                                     | Default |
| access\_token | String                                                                                                                                                                                                                                                                                                                                                                  | Mandatory | LG EMP(Enterprise Membership Platform)에서 사용자 인증을 위해 OAuth 표준에 따라 발급해주는 토큰 값입니다. | None    |
| Result        | <p>이 메서드의 호출 결과는 다음과 같이 2가지 경우(성공, 실패)가 있습니다.</p><h4>성공</h4><p>연결 성공</p><h4>실패</h4><p>실패한 경우, ThinQ Callback Websocket과의 연결이 되지 않습니다.</p>                                                                                                                                                                                                                               |           |                                                                                 |         |

### Request

```
         ## Query Params
WSS wss://s7vajyybvf.execute-api.ap-northeast-2.amazonaws.com/websocket?access_token=5a9a713f51a95c53d781addd1af0dfa4f6e1e7420a8bff3c5198308dac571aa9845832b8d29bbe1f04deec2d35229c6d
       
```

### Response

없음\
